<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Share Flex Message</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h2>‡πÅ‡∏ä‡∏£‡πå Flex Message ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h2>
  <button onclick="shareFlex()">‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏•‡∏¢</button>

  <script>
    const flexMessage = [
      {
        type: "flex",
        altText: "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏≠‡∏õ eLibrary ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏•‡∏¢!",
        contents: {
          type: "bubble",
          size: "giga",
          header: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "image",
                url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/head5.png",
                aspectRatio: "7:1",
                align: "center",
                gravity: "center",
                aspectMode: "cover",
                size: "full"
              }
            ],
            paddingAll: "none"
          },
          hero: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "box",
                layout: "vertical",
                contents: [
                  {
                    type: "image",
                    url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/w1.png",
                    aspectRatio: "129:79",
                    aspectMode: "fit",
                    backgroundColor: "#b3baff",
                    size: "100%"
                  }
                ],
                backgroundColor: "#b3baff",
                paddingAll: "none",
                action: {
                  type: "uri",
                  label: "‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏•‡∏¢",
                  uri: "https://elibrary-afapslib.cu-elibrary.com/"
                },
                borderColor: "#b3baff",
                borderWidth: "none"
              }
            ],
            backgroundColor: "#b3baff",
            borderWidth: "none",
            action: {
              type: "uri",
              label: "action",
              uri: "https://elibrary-afapslib.cu-elibrary.com/"
            },
            maxHeight: "100%"
          },
          body: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "box",
                layout: "horizontal",
                contents: [
                  {
                    type: "image",
                    url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/appstore.png",
                    size: "md",
                    action: {
                      type: "uri",
                      label: "App Store",
                      uri: "https://apps.apple.com/th/app/cu-e-library/id1607050195?l=th"
                    },
                    align: "center",
                    aspectRatio: "9:3"
                  },
                  {
                    type: "separator"
                  },
                  {
                    type: "image",
                    url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/manual.png",
                    size: "md",
                    aspectRatio: "9:3",
                    action: {
                      type: "uri",
                      label: "‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠",
                      uri: "https://youtu.be/4JAH4OQVOeo"
                    },
                    align: "center"
                  },
                  {
                    type: "separator"
                  },
                  {
                    type: "image",
                    url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/googleplay.png",
                    size: "md",
                    aspectRatio: "9:3",
                    action: {
                      type: "uri",
                      label: "Google Play",
                      uri: "https://play.google.com/store/apps/details?id=hti.cu.elibrary.android&pcampaignid=web_share"
                    },
                    align: "center"
                  }
                ],
                justifyContent: "center",
                offsetBottom: "xs"
              }
            ],
            background: {
              type: "linearGradient",
              startColor: "#5656c7",
              endColor: "#b3baff",
              angle: "0deg"
            }
          },
          footer: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "image",
                url: "https://www.afaps.ac.th/subdomain/sed/gallery/picfram/footer2.jpg",
                align: "center",
                gravity: "center",
                aspectMode: "cover",
                aspectRatio: "1080:50",
                action: {
                  type: "uri",
                  label: "shared",
                  uri: "https://liff.line.me/2006390864-5gQqgRvw"
                },
                size: "full"
              }
            ],
            paddingAll: "none",
            spacing: "md"
          }
        }
      }
    ];

    function shareFlex() {
      liff.init({ liffId: "2006390864-5gQqgRvw" }) // <-- ‡πÉ‡∏™‡πà LIFF ID ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        .then(() => {
          if (liff.isApiAvailable('shareTargetPicker')) {
            liff.shareTargetPicker(flexMessage)
              .then(() => alert("‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üéâ"))
              .catch(err => alert("‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + err));
          } else {
            alert("‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå‡∏ú‡πà‡∏≤‡∏ô LIFF");
          }
        })
        .catch(err => alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î LIFF: " + err));
    }
  </script>
</body>
</html>
